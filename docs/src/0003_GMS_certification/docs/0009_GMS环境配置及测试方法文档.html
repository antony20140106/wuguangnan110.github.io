<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>wugn</title>

      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
        <script src="../../../_static/js/baidutongji.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> wugn_note
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">GMS认证测试文档</a></li>
<li><a class="reference internal" href="#id1">参考</a><ul>
<li><a class="reference internal" href="#id2">1	GMS介绍</a></li>
<li><a class="reference internal" href="#ubuntu">2	ubuntu环境安装</a><ul>
<li><a class="reference internal" href="#id3">2.1 版本信息：</a></li>
<li><a class="reference internal" href="#jdk">2.2	安装JDK</a></li>
<li><a class="reference internal" href="#sdk">2.3	安装SDK</a></li>
<li><a class="reference internal" href="#id4">2.4	安装32位类库</a></li>
<li><a class="reference internal" href="#minicom">2.5	安装minicom</a></li>
<li><a class="reference internal" href="#apktool">2.6	安装apktool</a></li>
<li><a class="reference internal" href="#aapt">2.7	安装aapt工具</a></li>
<li><a class="reference internal" href="#vts-cts-cts-on-gsi-gts-sts">2.8	VTS环境（若测试CTS/CTS-ON-GSI/GTS/STS无需配置此项）</a></li>
<li><a class="reference internal" href="#id5">2.9 Ubuntu网络国外网配置</a></li>
<li><a class="reference internal" href="#gts-key">2.10 配置GTS key路径</a></li>
<li><a class="reference internal" href="#fastboot-usb">2.11 配置fastboot usb</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">3 测试工具和设备配置要求</a><ul>
<li><a class="reference internal" href="#id7">3.1	测试工具包</a></li>
<li><a class="reference internal" href="#id8">3.2	设备端配置要求</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">4 测试指令及流程</a><ul>
<li><a class="reference internal" href="#cts">4.1	CTS测试</a><ul>
<li><a class="reference internal" href="#id10">4.1.1	CTS测试准备</a></li>
<li><a class="reference internal" href="#id11">4.1.2	执行CTS测试</a></li>
<li><a class="reference internal" href="#id12">4.1.3	其他常用测试指令</a></li>
<li><a class="reference internal" href="#ctslog">4.1.4	CTS测试报告及log</a></li>
<li><a class="reference internal" href="#id13">4.1.5	测试中可能遇到的问题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cts-verifier">4.2	CTS Verifier测试相关</a><ul>
<li><a class="reference internal" href="#id14">4.2.1	测试准备</a></li>
<li><a class="reference internal" href="#id15">4.2.2	保存查看结果</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gts">4.3	GTS测试</a><ul>
<li><a class="reference internal" href="#id16">4.3.1	GTS测试准备</a></li>
<li><a class="reference internal" href="#id17">4.3.2	执行GTS测试</a></li>
<li><a class="reference internal" href="#id18">4.3.3	执行单独模块或者单独测试项</a></li>
<li><a class="reference internal" href="#gtslog">4.3.4	GTS测试报告及log</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">4.3.5	测试中可能遇到的问题</a></li>
<li><a class="reference internal" href="#vts">4.4	VTS测试</a><ul>
<li><a class="reference internal" href="#id20">4.4.1	VTS测试准备</a></li>
<li><a class="reference internal" href="#id21">4.4.2	执行VTS测试</a></li>
<li><a class="reference internal" href="#id22">4.4.3	执行单独模块或者单独测试项</a></li>
<li><a class="reference internal" href="#vtslog">4.4.4	VTS测试报告及log</a></li>
<li><a class="reference internal" href="#id23">4.4.5	测试中可能会遇到的问题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gsi-cts-on-gsi">4.5	GSI（Cts-on-gsi）测试</a><ul>
<li><a class="reference internal" href="#gsi">4.5.1	GSI测试准备</a></li>
<li><a class="reference internal" href="#id24">4.5.2	执行GSI测试</a></li>
<li><a class="reference internal" href="#id25">4.5.3	执行单独模块或者单独测试项</a></li>
<li><a class="reference internal" href="#gsilog">4.5.4	GSI测试报告及log</a></li>
<li><a class="reference internal" href="#id26">4.5.5	测试中可能遇到的问题</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sts">4.6	STS测试</a><ul>
<li><a class="reference internal" href="#id27">4.6.1	STS测试准备</a></li>
<li><a class="reference internal" href="#id28">4.6.2	执行STS测试</a></li>
<li><a class="reference internal" href="#id29">4.6.3	其他常用测试指令</a></li>
<li><a class="reference internal" href="#stslog">4.6.4	STS测试报告及log</a></li>
</ul>
</li>
<li><a class="reference internal" href="#go-m5xgo">4.7	Go版本性能测试（本章节为参考，M5x是非GO版本）</a><ul>
<li><a class="reference internal" href="#go">4.7.1	Go版本性能测试准备</a></li>
<li><a class="reference internal" href="#id30">4.7.2	执行性能测试</a></li>
<li><a class="reference internal" href="#log">4.7.3	性能测试报告及log</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id31">5	镜像烧入方法</a><ul>
<li><a class="reference internal" href="#id32">5.1	VTS镜像烧入方法</a></li>
<li><a class="reference internal" href="#cts-on-gsi">5.2	CTS-ON-GSI镜像烧入方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gsi-a-ab">6	如何确定GSI镜像 a/ab版本</a></li>
<li><a class="reference internal" href="#googlekey">7	白名单和Googlekey申请</a><ul>
<li><a class="reference internal" href="#id33">7.1	资料准备</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fingerprint">8	FingerPrint</a><ul>
<li><a class="reference internal" href="#id34">8.1	FingerPrint的组成</a></li>
<li><a class="reference internal" href="#id35">8.2	FingerPrint要求</a></li>
<li><a class="reference internal" href="#id36">8.3	FingerPrint相关属性要求</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id37">9 GMS需要自检查属性及显示等</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">wugn_note</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs"> 
<li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
<li>GMS认证测试文档</li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.forward()">Forward</a></li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.back()">Go Back</a> | </li>
<li style="float: right;margin-left: 10px;"><a href="/index.html">Home</a> | </li>

      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gms">
<h1>GMS认证测试文档<a class="headerlink" href="#gms" title="此标题的永久链接"></a></h1>
<p>GMS环境配置及测试方法文档</p>
</section>
<section id="id1">
<h1>参考<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://blog.csdn.net/qq_45412462/article/details/124077449">Android S XTS 测试入门</a></p></li>
</ul>
<section id="id2">
<h2>1	GMS介绍<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h2>
<p>GMS全称为Google Mobile Service，即谷歌移动服务。是Google为解决Android生态碎片化以及系统更新率慢等问题而发布的统一标准。GMS的目的就是让各种Android设备（如手机和平板等）开发商能够开发出兼容性更好的Android设备。
同时Google制定了CDD（Compatibility Defination Document）规范文档，为了达到验证CDD规范的目的，提供了一组CASE给不同平台厂商进行验证，Android设备只有满足CDD的规定并且通过GMS认证测试，才能获得Android的商标和享受Android Market的权限，才能使用Android Market。
目前Google在全球范围内授权6家3pl实验室来处理GMS认证，分别为：<br />
Fih（富士康）
Harman（哈曼）<br />
Pegatron（和硕）
Windriver（风河）
Mediatek（联发科技，只针对MTK芯片Express plus项目）、<br />
SPRD（展讯，只针对展讯芯片Express plus项目）</p>
<p>还有大量OEM厂商直接和Google对接GMS认证测试。
目前GMS认证测试项包括：<br />
CTS（Android Compatibility Test Suite）<br />
CTS Verifier（Android CTS Verifier）<br />
GTS（Google Mobile Services Test Suite）<br />
VTS（Android Vendor Test Suite）<br />
CTS-ON-GSI（cts on Google System Image）<br />
STS（Security Test Suite）<br />
Android性能测试（仅适用于Android Go版本）<br />
BTS（Build Test Suite，目前此项由3pl实验室进行，直接对接Google的OEM厂商自己进行）<br />
此外，GMS认证还包括项目的备案和项目白名单申请。</p>
</section>
<section id="ubuntu">
<h2>2	ubuntu环境安装<a class="headerlink" href="#ubuntu" title="此标题的永久链接"></a></h2>
<section id="id3">
<h3>2.1 版本信息：<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h3>
<p>系统版本：Ubuntu 16 LTS<br />
JDK版本： 1.8.0_171<br />
SDK版本：android-sdk_r24.4.1-linux.tgz<br />
ADB版本：1.0.40<br />
apktool版本：2.4.0<br />
aapt(Android Asset Packaging Tool)版本：v0.2-eng.ibotpe.20190216.092407<br />
注意：每个Android版本的GMS要求的版本不同，以测试时要求的为准。</p>
</section>
<section id="jdk">
<h3>2.2	安装JDK<a class="headerlink" href="#jdk" title="此标题的永久链接"></a></h3>
<p>#sudo add-apt-repository ppa:openjdk-r/ppa<br />
#sudo apt-get update<br />
#sudo apt-get install openjdk-8-jdk<br />
安装完成后，输入java -version，检查环境是否OK，如下：<br />
<img alt="javaversion" src="../../../_images/11-javaversion.png" /></p>
</section>
<section id="sdk">
<h3>2.3	安装SDK<a class="headerlink" href="#sdk" title="此标题的永久链接"></a></h3>
<p>1.下载最新SDK版本(点击链接进入下载页面），本文使用android-sdk_r24.4.1-linux.tgz，手动解压，会得到android-sdk-linux文件夹，本文放置到/home/kovy/sdk下，如下：<br />
<img alt="javaversion" src="../../../_images/11-sdk.png" /><br />
2.进入tools文件夹，运行./android<br />
<img alt="javaversion" src="../../../_images/11-android.png" /><br />
3.选择安装最新的工具，一般默认即可，点击”install 8 packages”<br />
<img alt="javaversion" src="../../../_images/11-install.png" /><br />
4.添加SDK环境变量<br />
&lt;第一种方法&gt;<br />
#sudo gedit ~/.bashrc<br />
//打开文件后，末尾添加如下信息（SDK路径改成实际路径）：<br />
export ANDROID_SDK=/home/kovy/sdk/android-sdk-linux<br />
export PATH=$PATH:$ANDROID_SDK/platform-tools:$ANDROID_SDK/tools<br />
//保存退出后，使环境生效<br />
#source ~/.bashrc<br />
&lt;第二种方法&gt;<br />
#su<br />
//SDK路径改成实际路径<br />
#echo ‘export ANDROID_SDK=/home/kovy/sdk/android-sdk-linux’ &gt;&gt; ~/.bashrc<br />
#echo ‘export PATH=$PATH:$ANDROID_SDK/platform-tools:$ANDROID_SDK/tools’ &gt;&gt; ~/.bashrc<br />
//使环境生效<br />
#source ~/.bashrc<br />
5、验证是否安装ok，输入adb version,如下：<br />
<img alt="javaversion" src="../../../_images/11-version.png" /></p>
</section>
<section id="id4">
<h3>2.4	安装32位类库<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h3>
<p>#sudo apt-get install lib32ncurses5 lib32z1 libstdc++6:i386 –y</p>
</section>
<section id="minicom">
<h3>2.5	安装minicom<a class="headerlink" href="#minicom" title="此标题的永久链接"></a></h3>
<p>//非必需，如果使用串口工具调试则安装
#sudo apt-get install minicom –y</p>
</section>
<section id="apktool">
<h3>2.6	安装apktool<a class="headerlink" href="#apktool" title="此标题的永久链接"></a></h3>
<p>官网教程：<br />
点击链接:<br />
1、下载apktool脚本:<a class="reference external" href="https://ibotpeaches.github.io/Apktool/install/">apktool</a> (右键点击, 保存链接为文件,文件名保存为apktool，无后缀)，或直接使用下方文件<br />
2、下载最新apktool.jar (<a class="reference external" href="https://bitbucket.org/iBotPeaches/apktool/downloads/">点击进入</a>),将下载的最新.jar文件重命名为apktool.jar（例如：apktool_2.4.0.jar改为apktool.jar）<br />
3、将apktool和apltool.jar放置到/usr/local/bin目录下<br />
4、更改文件权限<br />
#su<br />
#chmod 755 /usr/local/bin/apktool<br />
#chmod 755 /usr/local/bin/apktool.jar<br />
5、检查apktool环境：
#apktool –version</p>
</section>
<section id="aapt">
<h3>2.7	安装aapt工具<a class="headerlink" href="#aapt" title="此标题的永久链接"></a></h3>
<ol class="arabic simple">
<li><p>解压第六步下载的apktool.jar解压,提取解压后apktool/prebuilt/linux/目录下的aapt文件；</p></li>
<li><p>将aapt放置到/usr/local/bin</p></li>
<li><p>设置权限：<br />
#chmod 755 /usr/local/bin/aapt</p></li>
<li><p>验证aapt环境：<br />
#aapt version</p></li>
</ol>
</section>
<section id="vts-cts-cts-on-gsi-gts-sts">
<h3>2.8	VTS环境（若测试CTS/CTS-ON-GSI/GTS/STS无需配置此项）<a class="headerlink" href="#vts-cts-cts-on-gsi-gts-sts" title="此标题的永久链接"></a></h3>
<p>1.Install Python development kit:<br />
#sudo apt-get install python-dev<br />
2.Install Protocol Buffer tools (for Python):<br />
#sudo apt-get install python-protobuf<br />
#sudo apt-get install protobuf-compiler<br />
3.Install Python virtual environment-related tools:<br />
#sudo apt-get install python-virtualenv<br />
#sudo apt-get install python-pip<br />
//更新到最新<br />
#sudo pip install –upgrade pip<br />
#sudo pip install –upgrade virtualenv<br />
4.(Optionally) Download Python packages from PyPI to a local directory:<br />
(1) 在合适位置建立VTS_PYPI_PATH文件夹<br />
(2) 将VTS_PYPI_PATH路径加入环境变量后配置环境<br />
#sudo gedit ~/.bashrc<br />
//打开文件后，末尾添加如下信息（VTS_PYPI_PATH路径改成实际路径）：<br />
export VTS_PYPI_PATH=/home/kovy/VTS_PYPI_PATH<br />
//保存退出后，使环境生效<br />
#source ~/.bashrc<br />
#curl https://android.googlesource.com/platform/test/vts/+/master/script/  pip_requirements.txt?format=TEXT | base64 -d &gt; pip_requirements.txt<br />
#pip download -d $VTS_PYPI_PATH -r pip_requirements.txt –no-binary protobuf,grpcio,matplotlib,numpy,Pillow,scipy</p>
</section>
<section id="id5">
<h3>2.9 Ubuntu网络国外网配置<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h3>
<p>(1)	把电脑的mac地址发给网管配置，网管配置完后重启电脑查看电脑的ip是否是172.16.160.xxx网 段。是这个网段基本可以确认可以访问国外网络。<br />
(2)	添加一项dns为8.8.8.8,通过sudo gedit /etc/network/interfaces,再最后面增加dns-nameservers 8.8.8.8。</p>
</section>
<section id="gts-key">
<h3>2.10 配置GTS key路径<a class="headerlink" href="#gts-key" title="此标题的永久链接"></a></h3>
<p>sudo gedit ~/.bashrc  再最后面添加如下：<br />
export APE_API_KEY=/home/kovy/GMS/gts/key/gts-harman-public.json<br />
其中harman-public.json需实验室提供。<br />
立即生效：source ~/.bashrc</p>
</section>
<section id="fastboot-usb">
<h3>2.11 配置fastboot usb<a class="headerlink" href="#fastboot-usb" title="此标题的永久链接"></a></h3>
<p>(1)	在终端输入lsusb查看当前usb设备的vendorid和productid,<br />
(2)	在终端输入gedit /etc/udev/rules.d/51-android.rules,添加如下<br />
SUBSYSTEM==”usb”, ATTR{idVendor}==”1782”, ATTR{idProduct}==”4002”, MODE=”0666”<br />
把前面的vendorid和productid对应添加，有时候需要重启电脑生效识别</p>
</section>
</section>
<section id="id6">
<h2>3 测试工具和设备配置要求<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h2>
<section id="id7">
<h3>3.1	测试工具包<a class="headerlink" href="#id7" title="此标题的永久链接"></a></h3>
<p>CTS（https://source.android.google.cn/compatibility/cts/downloads）<br />
CTS Verifier（https://source.android.google.cn/compatibility/cts/downloads）<br />
GTS（3pl实验室提供或直接MADA账户下载）<br />
VTS（3pl实验室提供或直接MADA账户下载）<br />
CTS-ON-GSI（此项和VTS使用相同的VTS测试包）<br />
STS（3pl实验室提供或直接MADA账户下载，此测试包分32位和64位）<br />
GSI镜像（3pl实验室提供或直接MADA账户下载，此测试包分32位和64位）<br />
Media媒体文件（https://dl.google.com/dl/android/cts/android-cts-media-1.5.zip）<br />
M5x的这些包都由MADA公司提供，无需自己下载。</p>
</section>
<section id="id8">
<h3>3.2	设备端配置要求<a class="headerlink" href="#id8" title="此标题的永久链接"></a></h3>
<ol class="arabic simple">
<li><p>设备烧写User版本软件（STS 和 Go版本性能测试 需要下载UserDebug版本软件）</p></li>
<li><p>请烧写有效的SN序列号，IMEI，wifi地址，BT地址，MEID，Googlekey等信息</p></li>
<li><p>连接可用wifi（此处需要翻墙网络，保证设备可正常访问Google服务器）</p></li>
<li><p>开启蓝牙，Settings &gt; Connected devices &gt;Bluetooth ，打开</p></li>
<li><p>设置屏幕超时为最长，Settings &gt; Display &gt; Sleep &gt; 30 minutes，勾选</p></li>
<li><p>设置永不锁屏，Settings &gt; Security &amp; location &gt; Screen lock &gt; None，勾选</p></li>
<li><p>开启Location，Settings &gt; Security &amp; location &gt; On（6.0以上版本每次执行前均会检查GPS是否开启，未开启则停止测试）</p></li>
<li><p>设置语言为English(United States)，Settings &gt; System &gt; Language &amp; input  &gt; language，设为English(United States)</p></li>
<li><p>开启备份选项，Settings &gt; System &gt; Backup &gt; Back up to Google Drive(系统需预设Drive为默认备份项，GTS测试必开此项，其他测试可不开)</p></li>
<li><p>开启 USB debugging，Settings  &gt; System &gt; Developer options &gt; USB debugging（注意：在 Android 4.2 及更高版本中，默认情况下会隐藏开发者选项。要显示这些选项，请依次转到Settings &gt; System &gt; About phone &gt; Build number，然后点击Build number项七次。返回上一屏幕以查找开发者选项。）</p></li>
<li><p>保持唤醒状态，Settings &gt; System &gt; Developer options &gt; Stay Awake，勾选</p></li>
<li><p>关闭Verify apps over USB，Settings &gt; System &gt; Developer options &gt; Verify apps over USB ,点击使关闭</p></li>
<li><p>拷贝媒体文件（仅在测试CTS和Cts-on-gsi时候需要执行此项，如果没有拷贝设备端会自动进行下载，非常耗时，建议主动拷贝媒体文件到设备，以节约时间），在测试电脑上，通过adb正常连接设备后，进入媒体文件目录，执行目录下的copy_media.sh和copy_image.sh即可自动拷贝媒体文件到设备。可添加-s参数指定设备sn号来拷贝，如下：./copy_media.sh  -s  123456789</p></li>
<li><p>支持TFCard的设备，请插入TFCard，Google要求class10以上的T卡（仅在测试CTS和Cts-on-gsi时候需要执行此项，建议在retry阶段再单台设备插入即可）</p></li>
<li><p>支持SIM卡设备，请插入SIM卡（CTS测试需要此项，请保证设备可读取SIM卡号，数据流量可正常使用）</p></li>
</ol>
</section>
</section>
<section id="id9">
<h2>4 测试指令及流程<a class="headerlink" href="#id9" title="此标题的永久链接"></a></h2>
<section id="cts">
<h3>4.1	CTS测试<a class="headerlink" href="#cts" title="此标题的永久链接"></a></h3>
<section id="id10">
<h4>4.1.1	CTS测试准备<a class="headerlink" href="#id10" title="此标题的永久链接"></a></h4>
<p>电脑端操作：进入CTS测试包目录/android-cts/tools/，执行 ./cts-tradefed，即可进入到CTS测试环境<br />
设备端操作：请根据前述 设备端配置要求，进行设置，通过数据线连接到电脑端，执行拷贝媒体文件（建议首次测试所有设备拷贝媒体文件，只写SN序列号，在retry 阶段再在单台设备上烧写其他信息，插入SIM卡和TF卡来进行测试）。media文件放在电脑中的/tmp/android-cts-media路径下，如果/tmp/android-cts-media路径下没有media文件，电脑端将会自动从网上下载（需翻墙网络），由于文件比较大，会比较耗时。<br />
CTS 10_R5测试共689个模块，1190931项测试（根据设备软硬件配置差异会略有不同），建议多台设备一同测试以节约时间，基本上64位系统，4台设备一起测试，需要30～40小时。</p>
</section>
<section id="id11">
<h4>4.1.2	执行CTS测试<a class="headerlink" href="#id11" title="此标题的永久链接"></a></h4>
<p>a、执行整个CTS的测试：<br />
run cts   （单台测试命令）<br />
run cts –shard-count &lt;number_of_shards&gt;（多台测试命令 ，num为设备数量）<br />
还可使用下面命令：<br />
run cts –shard-count num -o -d –skip-system-status-check com.android.compatibility.common.tradefed.targetprep.NetworkConnectivityChecker<br />
注：<br />
-o = –skip-preconditions  跳过媒体文件等预设检测<br />
-d =–skip-device-info   跳过设备信息收集过程（可内部自测使用，申请白名单签名项和生成正式报告不建议使用）<br />
–skip-system-status-check com.android.compatibility.common.tradefed.targetprep.NetworkConnectivityChecker跳过网络连接检测<br />
b、CTS第一次结束之后，会留有失败项和未执行项，按如下执行retry 继续进行测试（请烧写各种号码，插入SIM卡和TF卡）。<br />
在cts测试环境下，执行l r（就是list result）指令，会列出当前已经测试过的内容，如下：<br />
首列为测试的Session ID，进行retry测试需要上一次的Session ID，继续执行如下指令：<br />
run retry –retry sessionid<br />
注：如果一次测试结束后，失败项或未执行项非常多，可以进行多台设备retry，执行如下指令：<br />
run retry –retry sessionid  –shard-count num<br />
c.生成测试计划及运行测试计划<br />
生成测试子计划：<br />
add subplan –name/-n &lt;subplan_name&gt; –result-type [pass | fail | timeout | notExecuted] [–session/-s &lt;session_id&gt;]<br />
运行测试子计划：<br />
run cts –subplan &lt;test_plan_name&gt;<br />
查看子计划：<br />
list subplans</p>
</section>
<section id="id12">
<h4>4.1.3	其他常用测试指令<a class="headerlink" href="#id12" title="此标题的永久链接"></a></h4>
<p>列出所有跑测结果</p>
<blockquote>
<div><p>l r<br />
列出所有检测到或已知的设备<br />
l d<br />
单跑某一个模块<br />
run cts -m &lt;模块名&gt;<br />
单跑某个测试项<br />
run cts -m &lt;模块名&gt; -t &lt;测试项名&gt;<br />
更多的命令可通过 help all 来查看</p>
</div></blockquote>
</section>
<section id="ctslog">
<h4>4.1.4	CTS测试报告及log<a class="headerlink" href="#ctslog" title="此标题的永久链接"></a></h4>
<p>1、测试报告<br />
路径：报告文件位于android-cts/results下面<br />
命名规则：以测试开始执行的日期和时间命名<br />
查看报告文件：(建议使用Chrome或火狐浏览器打开)<br />
test_result.xml 此为完整的测试报告，较大，容易引起电脑卡死，不要轻易打开它<br />
test_result_failures.html  此为仅包含失败项和未执行项的测试报告，一般查看此报告即可。<br />
2、CTS log<br />
路径：文件位于android-cts/logs<br />
命名规则：以测试开始执行的日期和时间命名</p>
</section>
<section id="id13">
<h4>4.1.5	测试中可能遇到的问题<a class="headerlink" href="#id13" title="此标题的永久链接"></a></h4>
<ol class="arabic simple">
<li><p>测试遇到Media模块问题需要复测时，media文件下载花费大量的时间<br />
media文件放在电脑中的/tmp/android-cts-media路径下，如果/tmp/android-cts-media路径下没有media文件，电脑端将会自动从网上下载（需翻墙网络），由于文件比较大，会比较耗时。</p></li>
<li><p>Camera问题<br />
Camera模块可能会出现大量错误，应尽早解决，因可能涉及和Camera厂商联调花费大量时间。</p></li>
</ol>
</section>
</section>
<section id="cts-verifier">
<h3>4.2	CTS Verifier测试相关<a class="headerlink" href="#cts-verifier" title="此标题的永久链接"></a></h3>
<section id="id14">
<h4>4.2.1	测试准备<a class="headerlink" href="#id14" title="此标题的永久链接"></a></h4>
<p>1、通过adb命令安装CtsVerifier.apk、NotificationBot.apk、CtsVerifierUSBCompanion.apk、CtsPermissionApp.apk等，命令如下：<br />
adb install -r xxx.apk<br />
2、打开手机上的CTS Verifier应用，根据提示测试每一项<br />
可查看下面文档。<br />
<span class="xref myst">Android_10.0_CTS_Verifier_Test_Guide_V1.1</span><br />
<span class="xref myst">Android_P_ITS测试流程</span></p>
</section>
<section id="id15">
<h4>4.2.2	保存查看结果<a class="headerlink" href="#id15" title="此标题的永久链接"></a></h4>
<p>所有测试完成后，点击CTS Verifier测试工具右上角的保存按钮，会提示结果保存位置，连接电脑，将结果拷贝到电脑即可查看。</p>
</section>
</section>
<section id="gts">
<h3>4.3	GTS测试<a class="headerlink" href="#gts" title="此标题的永久链接"></a></h3>
<section id="id16">
<h4>4.3.1	GTS测试准备<a class="headerlink" href="#id16" title="此标题的永久链接"></a></h4>
<p>电脑端操作：电脑端需要连接翻墙网络，确保电脑端可以正常访问Google服务器，进入GTS测试包目录/android-gts/tools/，执行 ./gts-tradefed，即可进入到GTS测试环境<br />
GTS测试需要key，把key放到电脑目录下，然后配置环境变量。如下：<br />
sudo gedit ~/.bashrc<br />
添加如下环境变量<br />
export APE_API_KEY=/home/kovy/GMS/gts/key/gts-harman-public.json<br />
生效命令：source ~/.bashrc<br />
设备端操作：请根据前述 设备端配置要求，进行设置，通过数据线连接到电脑端，不需拷贝媒体文件，Backup项必须打开。<br />
目前GTS 8.0_R1测试项共206个模块3000个测试项（根据设备软硬件配置差异会略有不同），测试项不多，单台设备测试即可，但是要保证翻墙网络的高速稳定，GTS测试会播放Google服务器端的网络视频。测试时间试网络情况而定，大约10小时左右。</p>
</section>
<section id="id17">
<h4>4.3.2	执行GTS测试<a class="headerlink" href="#id17" title="此标题的永久链接"></a></h4>
<p>a、执行整个GTS的测试：<br />
run gts （命令较特殊）<br />
b、GTS第一遍结束之后，会留有失败项和未执行项，按如下执行retry 继续进行测试<br />
l r   查看测试结果，获取session_id<br />
run retry –retry session_id –shard-count num</p>
</section>
<section id="id18">
<h4>4.3.3	执行单独模块或者单独测试项<a class="headerlink" href="#id18" title="此标题的永久链接"></a></h4>
<p>列出所有跑测结果<br />
l r<br />
列出所有检测到或已知的设备<br />
l d<br />
单跑某一个模块<br />
run gts -m &lt;模块名&gt;<br />
单跑某个测试项<br />
run gts -m &lt;模块名&gt; -t &lt;测试项名&gt;<br />
更多的命令可通过 help all 来查看</p>
</section>
<section id="gtslog">
<h4>4.3.4	GTS测试报告及log<a class="headerlink" href="#gtslog" title="此标题的永久链接"></a></h4>
<p>1、测试报告<br />
路径：文件位于android-gts/results下面<br />
命名规则：以测试开始执行的日期和时间命名<br />
查看报告文件：(建议使用Chrome或火狐浏览器打开)<br />
test_result.xml 此为完整的测试报告，较大，容易引起电脑卡死<br />
test_result_failures.html此为仅包含失败项和未执行项的测试报告，一般查看此报告即可。<br />
2、GTS log<br />
路径：文件位于android-gts/logs<br />
命名规则：以测试开始执行的日期和时间命名</p>
</section>
</section>
<section id="id19">
<h3>4.3.5	测试中可能遇到的问题<a class="headerlink" href="#id19" title="此标题的永久链接"></a></h3>
<p>在使用新版本的GTS测试包时，可能会出现要求升级JDK版本的问题，在测试开始会提示。</p>
</section>
<section id="vts">
<h3>4.4	VTS测试<a class="headerlink" href="#vts" title="此标题的永久链接"></a></h3>
<p>为了能更快的将设备升级到新的Android版本，Android O 开始新引入了 Project Treble，相应的GMS认证增加了VTS测试和Cts-on-gsi(针对GSI版本的CTS)测试。</p>
<section id="id20">
<h4>4.4.1	VTS测试准备<a class="headerlink" href="#id20" title="此标题的永久链接"></a></h4>
<p>电脑端操作：<br />
电脑端安装python环境并且连接网络，然后进入VTS测试包目录/android-vts/tools/，执行 ./vts-tradefed，即可进入到VTS测试环境<br />
设备端操作：<br />
设备端需要烧写GSI镜像文件（请参考VTS镜像烧入方法），然后根据前述 设备端配置要求，进行设置，通过数据线连接到电脑端，不需拷贝媒体文件，但在Android 10的测试中，media文件要放在电脑中的/tmp/android-cts-media路径下，如果/tmp/android-cts-media路径下没有media文件，电脑端将会自动从网上下载（需翻墙网络），由于文件比较大，会比较耗时。<br />
目前VTS测试项共316个模块，12462个测试项，（根据设备软硬件配置差异会略有不同），测试项不多，单台设备测试即可，但是要保证电脑端有网络连接，不然会影响python初始化，而引起跑不起来。测试包用时5小时左右。</p>
</section>
<section id="id21">
<h4>4.4.2	执行VTS测试<a class="headerlink" href="#id21" title="此标题的永久链接"></a></h4>
<p>a、执行整个VTS的测试：<br />
run vts<br />
b、VTS第一遍结束之后，会留有失败项和未执行项，按如下执行retry 继续进行测试<br />
l r   查看测试结果，获取session_id<br />
run vts –retry session_id –shard-count num</p>
</section>
<section id="id22">
<h4>4.4.3	执行单独模块或者单独测试项<a class="headerlink" href="#id22" title="此标题的永久链接"></a></h4>
<p>列出所有跑测结果<br />
l r<br />
列出所有检测到或已知的设备<br />
l d<br />
单跑某一个模块<br />
run vts -m &lt;模块名&gt;<br />
单跑某个测试项<br />
run vts -m &lt;模块名&gt; -t &lt;测试项名&gt;<br />
更多的命令可通过 help all 来查看</p>
</section>
<section id="vtslog">
<h4>4.4.4	VTS测试报告及log<a class="headerlink" href="#vtslog" title="此标题的永久链接"></a></h4>
<p>1、测试报告<br />
路径：文件位于android-vts/results下面<br />
命名规则：以测试开始执行的日期和时间命名<br />
查看报告文件：(建议使用Chrome或火狐浏览器打开)<br />
test_result.xml 此为完整的测试报告，较大，容易引起电脑卡死<br />
test_result_failures.html  此为仅包含失败项和未执行项的测试报告，一般查看此报告即可。<br />
2、VTS log<br />
路径：文件位于android-vts/logs<br />
命名规则：以测试开始执行的日期和时间命名</p>
</section>
<section id="id23">
<h4>4.4.5	测试中可能会遇到的问题<a class="headerlink" href="#id23" title="此标题的永久链接"></a></h4>
<ol class="arabic simple">
<li><p>USB无法识别问题<br />
解决办法：<br />
把51-android.rules拷贝到/etc/udev/rules.d/51-android.rules<br />
添加对应的usb id，可以通过lsusb查看<br />
重启电脑生效</p></li>
</ol>
</section>
</section>
<section id="gsi-cts-on-gsi">
<h3>4.5	GSI（Cts-on-gsi）测试<a class="headerlink" href="#gsi-cts-on-gsi" title="此标题的永久链接"></a></h3>
<section id="gsi">
<h4>4.5.1	GSI测试准备<a class="headerlink" href="#gsi" title="此标题的永久链接"></a></h4>
<p>电脑端操作：电脑端安装python环境并且连接网络，进入VTS测试包目录/android-vts/tools/，执行 ./vts-tradefed，即可进入到GSI测试环境（测试包和VTS测试相同）<br />
设备端操作：设备端需要烧写GSI镜像文件（请参考CTS-ON-GSI镜像烧入方法），然后根据前述 设备端配置要求 进行设置，通过数据线连接到电脑端，需拷贝媒体文件。<br />
目前GSI测试项共346个模块，580020个测试项（基本是CTS的一半，根据设备软硬件配置差异会略有不同），建议多台设备一同测试以节约时间，基本上64位系统，3台设备一起测试，需要20小时左右。</p>
</section>
<section id="id24">
<h4>4.5.2	执行GSI测试<a class="headerlink" href="#id24" title="此标题的永久链接"></a></h4>
<p>a、执行整个GSI的测试：<br />
run cts-on-gsi<br />
run cts-on-gsi –shard-count num -o<br />
b、GSI第一遍结束之后，会留有失败项和未执行项，按如下执行retry 继续进行测试<br />
l r   查看测试结果，获取session_id<br />
run retry –retry session_id –shard-count num -o</p>
</section>
<section id="id25">
<h4>4.5.3	执行单独模块或者单独测试项<a class="headerlink" href="#id25" title="此标题的永久链接"></a></h4>
<p>列出所有跑测结果<br />
l r<br />
列出所有检测到或已知的设备<br />
l d<br />
单跑某一个模块<br />
run cts-on-gsi -m &lt;模块名&gt;<br />
单跑某个测试项<br />
run cts-on-gsi -m &lt;模块名&gt; -t &lt;测试项名&gt;<br />
更多的命令可通过 help all 来查看</p>
</section>
<section id="gsilog">
<h4>4.5.4	GSI测试报告及log<a class="headerlink" href="#gsilog" title="此标题的永久链接"></a></h4>
<p>1、测试报告<br />
路径：文件位于android-vts/results下面<br />
命名规则：以测试开始执行的日期和时间命名<br />
查看报告文件：(建议使用Chrome或火狐浏览器打开)<br />
test_result.xml 此为完整的测试报告，较大，容易引起电脑卡死<br />
test_result_failures.html  此为仅包含失败项和未执行项的测试报告，一般查看此报告即可。<br />
2、GSI log<br />
路径：文件位于android-vts/logs<br />
命名规则：以测试开始执行的日期和时间命名。</p>
</section>
<section id="id26">
<h4>4.5.5	测试中可能遇到的问题<a class="headerlink" href="#id26" title="此标题的永久链接"></a></h4>
<p>GSI测试中大部分测试用例与CTS中相同，可以先解决CTS的问题，解完CTS可能GSI的问题也就解决了。</p>
</section>
</section>
<section id="sts">
<h3>4.6	STS测试<a class="headerlink" href="#sts" title="此标题的永久链接"></a></h3>
<section id="id27">
<h4>4.6.1	STS测试准备<a class="headerlink" href="#id27" title="此标题的永久链接"></a></h4>
<p>电脑端操作：STS测试包分32位和64位版本，请根据设备端软件选择对应版本。进入STS测试包目录/android-sts/tools/，执行 ./sts-tradefed，即可进入到STS测试环境<br />
设备端操作：设备端需要烧写UserDebug版本软件，然后根据前述 设备端配置要求，进行设置，通过数据线连接到电脑端，不用拷贝媒体文件，不用SIM卡和TF卡。<br />
目前STS测试项共580项（根据设备软硬件配置差异会略有不同），单台设备测试即可。64位系统，单台测试，需要5小时左右。</p>
</section>
<section id="id28">
<h4>4.6.2	执行STS测试<a class="headerlink" href="#id28" title="此标题的永久链接"></a></h4>
<p>a、执行整个STS的测试：<br />
run sts-engbuild<br />
b、STS第一次结束之后，会留有失败项和未执行项，请执行retry进一步测试，请按如下执行retry 继续进行测试。<br />
在sts测试环境下，执行l r（就是list result）指令，会列出当前已经测试过的内容，如下：<br />
首列为测试的Session ID，进行retry测试需要上一次的Session ID，继续执行如下指令：<br />
run retry –retry session-id</p>
</section>
<section id="id29">
<h4>4.6.3	其他常用测试指令<a class="headerlink" href="#id29" title="此标题的永久链接"></a></h4>
<p>列出所有跑测结果</p>
<blockquote>
<div><p>l r<br />
列出所有检测到或已知的设备<br />
l d<br />
单跑某一个模块<br />
run sts-engbuild -m &lt;模块名&gt;<br />
单跑某个测试项<br />
run sts-engbuild -m &lt;模块名&gt; -t &lt;测试项名&gt;<br />
更多的命令可通过 help all 来查看</p>
</div></blockquote>
</section>
<section id="stslog">
<h4>4.6.4	STS测试报告及log<a class="headerlink" href="#stslog" title="此标题的永久链接"></a></h4>
<p>1、测试报告<br />
路径：报告文件位于android-sts/results下面<br />
命名规则：以测试开始执行的日期和时间命名<br />
查看报告文件：(建议使用Chrome或火狐浏览器打开)<br />
test_result.xml 此为完整的测试报告，较大，容易引起电脑卡死<br />
test_result_failures.html  此为仅包含失败项和未执行项的测试报告，一般查看此报告即可。<br />
2、STS log<br />
路径：文件位于android-sts/logs<br />
命名规则：以测试开始执行的日期和时间命名</p>
</section>
</section>
<section id="go-m5xgo">
<h3>4.7	Go版本性能测试（本章节为参考，M5x是非GO版本）<a class="headerlink" href="#go-m5xgo" title="此标题的永久链接"></a></h3>
<section id="go">
<h4>4.7.1	Go版本性能测试准备<a class="headerlink" href="#go" title="此标题的永久链接"></a></h4>
<p>电脑端操作：只有Go版本软件需要进行性能测试，使用Google提供的性能测试脚本（perf-scripts-2018-05-31-1527799913-198773620.tar.gz）,还需要Google提供的3P Apps（Test APKs-20180531T020725Z001.zip）。解压测试脚本后，将3A Apps内容拷贝到测试文件夹的apps目录，待设备连接到电脑后，执行./main.sh即可。<br />
设备端操作：设备端需要烧写UserDebug版本软件，然后做如下设置：<br />
插入TF卡<br />
开启wifi，但不用连接<br />
开启stay awake（11.Settings &gt; System &gt; Developer options &gt; Stay Awake，勾选）<br />
设置无屏锁（Settings &gt; Security &amp; location &gt; Screen lock &gt; None，勾选）<br />
性能测试单台设备测试即可，测试成功会生成压缩包，一般需要多次测试才可完成。</p>
</section>
<section id="id30">
<h4>4.7.2	执行性能测试<a class="headerlink" href="#id30" title="此标题的永久链接"></a></h4>
<p>设备根据1中设置好之后，连接到电脑端，在测试脚本根目录下执行./main.sh</p>
</section>
<section id="log">
<h4>4.7.3	性能测试报告及log<a class="headerlink" href="#log" title="此标题的永久链接"></a></h4>
<p>测试报告<br />
路径：报告文件位于测试脚本根目录下面<br />
命名规则：results-设备SN号码-时间戳.tar.gz<br />
查看报告文件：在测试脚本根目录下有：summary_results和test_results两个文件夹，压缩包里面的就是这两项内容。其中，summary_results中的内容是各测试项的结果；test_results中包含针对每个app的测试结果。<br />
报告解读：请参考MTK的CDD文档中内容分析性能测试结果。</p>
</section>
</section>
</section>
<section id="id31">
<h2>5	镜像烧入方法<a class="headerlink" href="#id31" title="此标题的永久链接"></a></h2>
<section id="id32">
<h3>5.1	VTS镜像烧入方法<a class="headerlink" href="#id32" title="此标题的永久链接"></a></h3>
<p>此项测试需要有boot权限</p>
<ol class="arabic simple">
<li><p>设备刷入USER版本。</p></li>
<li><p>设备端进入Settings &gt; System &gt; Developer options,分别打开OEM unlocking和USB debugging选项开关</p></li>
<li><p>设备长按音量 + 和电源键进入fastboot模式（或在开机模式下在电脑端cmd（或shell）窗口直接执行adb reboot bootloader）</p></li>
<li><p>cmd（或shell）窗口执行fastboot flashing unlock，执行命令后需要选择音量 + 来确认unlock</p></li>
<li><p>cmd（或shell）窗口执行fastboot flash boot boot-debug.img，此项可选执行，出现烧录完成无法开机现象，请添加执行此项(以M5x为例，boot-debug.img在系统out/target/product/M5x目录下获取)</p></li>
<li><p>cmd（或shell）窗口执行fastboot reboot fastboot</p></li>
<li><p>cmd（或shell）窗口执行fastboot erase system，此项可选执行，出现烧录完成无法开机现象，请添加执行此项。</p></li>
<li><p>cmd（或shell）窗口执行fastboot flash system system.img（system.img就是GSI镜像，版本确认请参考如何如何确认GSI镜像）</p></li>
<li><p>cmd（或shell）窗口执行fastboot reboot</p></li>
</ol>
</section>
<section id="cts-on-gsi">
<h3>5.2	CTS-ON-GSI镜像烧入方法<a class="headerlink" href="#cts-on-gsi" title="此标题的永久链接"></a></h3>
<p>此项测试不能有boot权限</p>
<ol class="arabic simple">
<li><p>设备刷入USER版本。</p></li>
<li><p>设备端进入Settings &gt; System &gt; Developer options,分别打开OEM unlocking和USB debugging选项开关</p></li>
<li><p>设备长按音量 + 和电源键进入fastboot模式（或在开机模式下在电脑端cmd（或shell）窗口直接执行adb reboot bootloader）</p></li>
<li><p>cmd（或shell）窗口执行fastboot flashing unlock，执行命令后需要选择音量 + 来确认unlock</p></li>
<li><p>cmd（或shell）窗口执行fastboot reboot fastboot</p></li>
<li><p>cmd（或shell）窗口执行fastboot erase system，此项可选执行，出现烧录完成无法开机现象，请添加执行此项。</p></li>
<li><p>cmd（或shell）窗口执行fastboot flash system system.img（system.img就是GSI镜像，版本确认请参考如何确认GSI镜像）</p></li>
<li><p>cmd（或shell）窗口执行fastboot reboot bootloader</p></li>
<li><p>cmd（或shell）窗口执行fastboot flashing lock</p></li>
<li><p>cmd（或shell）窗口执行fastboot reboot</p></li>
</ol>
</section>
</section>
<section id="gsi-a-ab">
<h2>6	如何确定GSI镜像 a/ab版本<a class="headerlink" href="#gsi-a-ab" title="此标题的永久链接"></a></h2>
<p>请根据下图查找项目软件ProjectConfig.mk中对应各项宏定义值，确认系统所支持的是a/ab版本，然后根据对应Security patch level来选择对应的GSI版本，如：signed_signed-aosp_arm64-img-6860398.zip<br />
<img alt="gsi" src="../../../_images/11-gsi.png" /></p>
</section>
<section id="googlekey">
<h2>7	白名单和Googlekey申请<a class="headerlink" href="#googlekey" title="此标题的永久链接"></a></h2>
<section id="id33">
<h3>7.1	资料准备<a class="headerlink" href="#id33" title="此标题的永久链接"></a></h3>
<ol class="arabic simple">
<li><p>更新系统的GMS包为最新版本。</p></li>
<li><p>本设备任意一条测试case， CTS或者GTS随意一项（主要是为了提起设备信息， fail的也行），注意case中包括了fingerprint，提供的fingerprint要和最终的送测版本不一样。</p></li>
<li><p>device ID,  用于申请Google key，文件名格式举例：xxx_xxxM5x_00.txt，必须是TXT文档（sn不超过32个字符）可以用SN号段编译，M5x写了10万个SN即keybox可以写入到10万个机器中，SN格式如下：<br />
xxx_xxxM5x_0000001<br />
xxx_xxxM5x_0000002<br />
xxx_xxxM5x_0000003….</p></li>
<li><p>GMS_DeviceInfo表格，表格是由MADA提供，主要填写系统的属性及参数；</p></li>
<li><p>提供run cts -m CtsCurrentApiSignatureTestCases 签名报告；<br />
注意：这个时候版本的fingerprint中品牌名称及设备名称已确定，后面不可修改。</p></li>
</ol>
</section>
</section>
<section id="fingerprint">
<h2>8	FingerPrint<a class="headerlink" href="#fingerprint" title="此标题的永久链接"></a></h2>
<section id="id34">
<h3>8.1	FingerPrint的组成<a class="headerlink" href="#id34" title="此标题的永久链接"></a></h3>
<p>xxxM5x FingerPrint：xxx/M5x/xxxM5x:10/QP1A.190711.020/PayDroid1000BirchV15100T3:user/release-keys
BUILD_FINGERPRINT := $(PRODUCT_BRAND)/$(TARGET_PRODUCT)/$(TARGET_DEVICE):$(PLATFORM_VERSION)/$(BUILD_ID)/$(BF_BUILD_NUMBER):$(TARGET_BUILD_VARIANT)/$(BUILD_VERSION_TAGS)<br />
FingerPrint在该文件中生成：build/make/core/Makefile。<br />
(PRODUCT_BRAND)/$( TARGET_PRODUCT)/$( TARGET_DEVICE) 不能包含空格或者 ‘.’。</p>
</section>
<section id="id35">
<h3>8.2	FingerPrint要求<a class="headerlink" href="#id35" title="此标题的永久链接"></a></h3>
<p>Build fingerprint必须唯一，没有使用过，Build fingerprint必须包含release-keys<br />
正式送测fingerprint必须和申请白名单的fingerprint不一致，否则无法上传APFE。</p>
</section>
<section id="id36">
<h3>8.3	FingerPrint相关属性要求<a class="headerlink" href="#id36" title="此标题的永久链接"></a></h3>
<p>devices信息和Vendor devices信息一致</p>
<ol class="arabic simple">
<li><p>ro.build.fingerprint和ro.vendor.build.fingerprint必须一样；</p></li>
<li><p>ro.product.brand和ro.vendor.product.brand必须一样；</p></li>
<li><p>ro.product.device和ro.vendor.product.device必须一样；</p></li>
<li><p>ro.product.manufacturer和ro.vendor.product. manufacturer必须一样；</p></li>
<li><p>ro.product.model和ro.vendor.product.model必须一样；</p></li>
<li><p>ro.product.name和ro.vendor.product.name必须一样；</p></li>
<li><p>这三个值必须一致：ro.vendor.build.fingerprint，ro.build.fingerprint，ro. bootimage.build.fingerprint；</p></li>
</ol>
</section>
</section>
<section id="id37">
<h2>9 GMS需要自检查属性及显示等<a class="headerlink" href="#id37" title="此标题的永久链接"></a></h2>
<p>这里是用M5x的文档举例，每个版本的要求可能略有不同。<br />
<span class="xref myst">Customer_Checklist_V9_2020</span></p>
</section>
</section>


           </div>
         <div class="articleComments">
               <comments>
  <script src="https://utteranc.es/client.js"
    repo="iswbm/magic-python"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</comments>
           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, wugn.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
  

<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "JoV5csIHTGhHiGQ4",ck: "JoV5csIHTGhHiGQ4"})</script>

<br/>
<script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/JoV5csIHTGhHiGQ4/quote.js?theme=#4C8AC2,#BB2626,#040000,#333333,#AE3535,#1690FF,14&f=14"></script>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>