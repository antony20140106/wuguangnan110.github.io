<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>wugn</title>

      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> wugn_note
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">简述</a><ul>
<li><a class="reference internal" href="#id2">参考</a></li>
<li><a class="reference internal" href="#id3">知识点</a><ul>
<li><a class="reference internal" href="#id4">1.点击控件长时间无响应问题</a><ul>
<li><a class="reference internal" href="#async-await">async/await</a></li>
<li><a class="reference internal" href="#backgroundworker">BackgroundWorker实例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wpf">2.wpf 调用线程无法访问此对象,因为另一个线程拥有该对象</a></li>
<li><a class="reference internal" href="#id5">3.线程创建</a></li>
<li><a class="reference internal" href="#id6">4.文件遍历</a></li>
<li><a class="reference internal" href="#c">5.C# 文件操作</a><ul>
<li><a class="reference internal" href="#id7">1.清除文件</a></li>
<li><a class="reference internal" href="#id8">6.修改文件名，并增加时间戳后缀</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-adb">6.执行python/adb脚本</a></li>
<li><a class="reference internal" href="#id9">7.控件使用技巧</a><ul>
<li><a class="reference internal" href="#id10">1.换行显示</a></li>
<li><a class="reference internal" href="#textboxtxt">2.保存TextBox文本为txt</a></li>
<li><a class="reference internal" href="#id11">3.如何弹出确认提示框</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">wugn_note</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs"> 
<li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
<li>简述</li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.forward()">Forward</a></li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.back()">Go Back</a> | </li>
<li style="float: right;margin-left: 10px;"><a href="/index.html">Home</a> | </li>

      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>简述<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h1>
<p>WPF一些学习记录</p>
<section id="id2">
<h2>参考<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
</section>
<section id="id3">
<h2>知识点<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<section id="id4">
<h3>1.点击控件长时间无响应问题<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>参考</p></li>
<li><p><a class="reference external" href="https://www.cnblogs.com/provissy/p/4122112.html">C# &amp; WPF 随手小记之一 ——初探async await 实现多线程处理</a></p></li>
</ul>
<p>在 WPF 中维护响应式 UI 的同时执行长时间运行的操作的两个示例。 一种方法使用 BackgroundWorker 对象，而第二种方法使用较新的 async/await 关键字。</p>
<section id="async-await">
<h4>async/await<a class="headerlink" href="#async-await" title="Permalink to this headline"></a></h4>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="w">       </span><span class="k">private</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">AsyncTask_Get_MTK_Log</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">string</span><span class="w"> </span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Environment</span><span class="p">.</span><span class="n">CurrentDirectory</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">try</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">p</span><span class="p">.</span><span class="n">StartInfo</span><span class="p">.</span><span class="n">Arguments</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;/c adb pull /sdcard/debuglogger .&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">                    </span><span class="n">p</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span><span class="w"></span>

<span class="w">                    </span><span class="kt">string</span><span class="w"> </span><span class="n">Adb_Output</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">();</span><span class="w"></span>
<span class="w">                    </span><span class="n">p</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>

<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">Text</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="p">});</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">catch</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;获取打印失败&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Button_Click_Get_MTK_Log</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">RoutedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">adb_status</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="k">try</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;正在从手机中拷贝...&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;拷贝完成，路径：&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">AsyncTask_Get_MTK_Log</span><span class="p">()</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\\debuglogger&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">catch</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">&quot;请连接手机adb&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="backgroundworker">
<h4>BackgroundWorker实例<a class="headerlink" href="#backgroundworker" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.jb51.net/article/111019.htm">C# BackgroundWorker用法详解</a></p></li>
<li><p><a class="reference external" href="https://www.cnblogs.com/javier520/p/10842161.html">C#backgroundWorker用法</a></p></li>
<li><p>backgroundwork主要的事件及参数：</p></li>
<li><p>1.DoWork——当执行BackgroundWorker.RunWorkerAsync方法时会触发该事件，并且传递DoWorkEventArgs参数;</p></li>
<li><p>2.RunWorkerCompleted——异步操作完成或中途终止会触发该事件。</p></li>
<li><p>3.ProgressChanged——操作处理中获得的处理状态变化，通过BackgroundWorker.ReportProgress(int)方法触发该事件，并且传递ProgressChangedEventArgs,其中包含了处理的百分比,这个参数在UI界面上设置progressbar控件。</p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="w">       </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Button_Click_Unlock_Android</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">RoutedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;开始对机器进行解锁操作...&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">RunBackgroundWorkerStyle</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RunBackgroundWorkerStyle</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Make sure we specify that we support progress reporting and cancellation.</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">ProgressBar</span><span class="p">.</span><span class="n">Value</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">ProgressBar</span><span class="p">.</span><span class="n">Maximum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">90</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">backgroundWorker</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BackgroundWorker</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">WorkerReportsProgress</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="n">WorkerSupportsCancellation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>

<span class="w">            </span><span class="c1">// Handler for progress changed events. Update the ProgressBar,</span>
<span class="w">            </span><span class="c1">// process the data and log an event.</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ProgressChanged</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">pe</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">//修改进度条的显示。</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="n">ProgressBar</span><span class="p">.</span><span class="n">Value</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">pe</span><span class="p">.</span><span class="n">ProgressPercentage</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;正在执行命令：&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">pe</span><span class="p">.</span><span class="n">UserState</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>

<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">DoWork</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">pe</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">//string resultStr = &quot;&quot;;</span>
<span class="w">                </span><span class="c1">//RunCMDCommand(out resultStr,&quot;adb reboot bootloader&quot;, &quot;fastboot flashing unlock&quot;, &quot;adb wait-for-device&quot;, &quot;adb root&quot;, &quot;adb disable-verity&quot;, &quot;adb reboot&quot;, &quot;adb wait-for-device&quot;, &quot;adb root&quot;, &quot;adb remount&quot;);</span>
<span class="w">                </span><span class="c1">//Console.WriteLine(resultStr);   </span>
<span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="kt">string</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb reboot bootloader&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb reboot bootloader&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;fastboot flashing unlock&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fastboot flashing unlock&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Dispatcher</span><span class="p">.</span><span class="n">Invoke</span><span class="p">(</span><span class="w"></span>
<span class="w">                    </span><span class="k">new</span><span class="w"> </span><span class="nf">Action</span><span class="p">(</span><span class="w"></span>
<span class="w">                        </span><span class="k">delegate</span><span class="w"></span>
<span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="w">                            </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;请手动长按power键10秒重启！&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                            </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;请手动长按power键10秒重启！&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                            </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;请手动长按power键10秒重启！&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb wait-for-device&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb wait-for-device 发现设备&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb root&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb root&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb disable-verity&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb disable-verity&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb reboot&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb reboot&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb wait-for-device&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb wait-for-device 发现设备&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb root&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb root&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Execute</span><span class="p">(</span><span class="s">&quot;adb remount&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">sum</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;adb remount&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>

<span class="w">            </span><span class="c1">// When the worker is finished, tidy up.</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">RunWorkerCompleted</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">pe</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">+</span><span class="s">&quot;完成解锁&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">&quot;完成&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">backgroundWorker</span><span class="p">.</span><span class="n">RunWorkerAsync</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">500</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="wpf">
<h3>2.wpf 调用线程无法访问此对象,因为另一个线程拥有该对象<a class="headerlink" href="#wpf" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>参考：</p></li>
<li><p><a class="reference external" href="https://www.cnblogs.com/tianma3798/p/5762016.html">Wpf 调用线程无法访问此对象，因为另一个线程拥有该对象，解决方案</a></p></li>
</ul>
<p>出现上面的异常是因为多个线程在同时访问一个对象造成的，解决方案：使用Dispatcher.BeginInvoke+委托方式，修改UI。</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>历程：
//线程方法，修改Button内容
private void UpdateBtn()
{
    int i = 0;
    while (true)
    {
        i++;
        Action action1 = () =&gt;
        {
            button.Content = i;
        };
        button.Dispatcher.BeginInvoke(action1);
        // 如果不设置等待，整个程序死循环
        Thread.Sleep(500);
    }
}

实例：
      void led_status_threadfunc()
        {
            p.StartInfo.Arguments = &quot;/c adb devices&quot;;

            while (true)
            {
                Action action_offline = () =&gt;
                {
                    led.Fill = new SolidColorBrush(Colors.Red);
                    led.Stroke = new SolidColorBrush(Colors.Red);
                };
                Action action_online = () =&gt;
                {
                    led.Fill = new SolidColorBrush(Colors.Green);
                    led.Stroke = new SolidColorBrush(Colors.Green);
                };
               
                p.Start();
                string outtr = p.StandardOutput.ReadToEnd();
                p.Close();
                outtr = outtr.Replace(&quot;List of devices attached&quot;, &quot;&quot;);
                outtr = outtr.Replace(&quot;device&quot;, &quot;&quot;);
                outtr = outtr.Replace(&quot;\r&quot;, &quot;&quot;);
                outtr = outtr.Replace(&quot;\n&quot;, &quot;&quot;);
                if (outtr.Length == 0)
                {
                    led.Dispatcher.BeginInvoke(action_offline);
                    adb_status = false;
                    //MessageBox.Show(&quot;请连接adb设备&quot;);
                }
                else
                {      

                    led.Dispatcher.BeginInvoke(action_online);
                    adb_status = true;
                    //MessageBox.Show(&quot;找到adb设备：&quot; + outtr);
                }
            }
            Thread.Sleep(1000);
        }
</pre></div>
</div>
<p>或者：</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="c1">//blog.csdn.net/cselmu9/article/details/8274556?locationNum=12&amp;fps=1</span>
<span class="n">TextBox1</span><span class="p">.</span><span class="n">Dispatcher</span><span class="p">.</span><span class="n">Invoke</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">Action</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="k">delegate</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;设备解锁&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="id5">
<h3>3.线程创建<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>参考</p></li>
<li><p><a class="reference external" href="https://www.cnblogs.com/yangyancheng/archive/2011/04/03/2004404.html">WPF调用线程</a></p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">WpfThreadTest</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// MainWindow.xaml 的交互逻辑</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">MainWindow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Window</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">countThread</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">MainWindow</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">InitializeComponent</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">textBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToLocalTime</span><span class="p">().</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;yyyy年MM月dd日 hh:mm:ss&quot;</span><span class="p">);</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">countThread</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ThreadStart</span><span class="p">(</span><span class="n">DispatcherThread</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">button3_Click</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">RoutedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">button3</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;开始时间线程&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">button3</span><span class="p">.</span><span class="n">Content</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;停止时间线程&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">countThread</span><span class="p">.</span><span class="n">ThreadState</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">ThreadState</span><span class="p">.</span><span class="n">Suspended</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="c1">//线程继续</span>
<span class="w">                    </span><span class="n">countThread</span><span class="p">.</span><span class="n">Resume</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">else</span><span class="w"></span>
<span class="w">                    </span><span class="n">countThread</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">button3</span><span class="p">.</span><span class="n">Content</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;开始时间线程&quot;</span><span class="p">;</span><span class="w">  </span>
<span class="w">                </span><span class="c1">//线程挂起</span>
<span class="w">                </span><span class="n">countThread</span><span class="p">.</span><span class="n">Suspend</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">DispatcherThread</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="c1">//可以通过循环条件来控制UI的更新</span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">///线程优先级，最长超时时间，方法委托（无参方法）</span>
<span class="w">                </span><span class="n">textBox1</span><span class="p">.</span><span class="n">Dispatcher</span><span class="p">.</span><span class="n">Invoke</span><span class="p">(</span><span class="w"></span>
<span class="w">                    </span><span class="n">DispatcherPriority</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span><span class="w"> </span><span class="n">TimeSpan</span><span class="p">.</span><span class="n">FromSeconds</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Action</span><span class="p">(</span><span class="n">UpdateTime</span><span class="p">));</span><span class="w"></span>
<span class="w">                </span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span><span class="w">                </span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">UpdateTime</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="n">textBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToLocalTime</span><span class="p">().</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;yyyy年MM月dd日 hh:mm:ss&quot;</span><span class="p">);</span><span class="w">      </span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Window_Closed</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">EventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">countThread</span><span class="p">.</span><span class="n">Abort</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">Application</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">Shutdown</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="id6">
<h3>4.文件遍历<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.cnblogs.com/skylaugh/archive/2012/09/23/2698850.html">C#遍历指定文件夹中的所有文件</a></p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>遍历文件夹：
	DirectoryInfo folder = new DirectoryInfo(Path);

	foreach (DirectoryInfo NextFolder in folder.GetDirectories(&quot;APLog*&quot;))
	{
		Console.WriteLine(NextFolder.FullName);
		TextBox1.Text = NextFolder.FullName;
	}

遍历文件：
//遍历文件
foreach(FileInfo NextFile in TheFolder.GetFiles())
   this.listBox2.Items.Add(NextFile.Name);

对某个文件夹的某个文件名进行操作：
	foreach (DirectoryInfo NextFolder in folder.GetDirectories(&quot;APLog*&quot;))
	{
		Console.WriteLine(NextFolder.FullName);
		TextBox1.Text = NextFolder.FullName;
		//new_folder = NextFolder;
		foreach (FileInfo NextFile in NextFolder.GetFiles(&quot;kernel_log*&quot;))
		{
			ProcessInfo.Arguments = Environment.CurrentDirectory + &quot;\\tools\\kernel_to_utc.py &quot; + NextFile.FullName;
			TextBox1.Text = Environment.CurrentDirectory + &quot;\\tools\\kernel_to_utc.py &quot; + NextFile.FullName;
			Process = Process.Start(ProcessInfo);
			Process.WaitForExit();
			ExitCode = Process.ExitCode;
			Process.Close();
		}
	}

搜索某个文件夹下所有包含带有xx字符串的文件并操作：
/// &lt;summary&gt;
/// 获得指定路径下所有文件名
/// &lt;/summary&gt;
/// &lt;param name=&quot;sw&quot;&gt;文件写入流&lt;/param&gt;
/// &lt;param name=&quot;path&quot;&gt;文件写入流&lt;/param&gt;
/// &lt;param name=&quot;word&quot;&gt;文件名过滤&lt;/param&gt;
public void getFileFilter(string path, string word, List&lt;FileInfo&gt; lst)
{
	DirectoryInfo root = new DirectoryInfo(path);
	foreach (FileInfo f in root.GetFiles(word + &quot;*&quot;))
	{
		lst.Add(f);
	}
}

/// &lt;summary&gt;
/// 获得指定路径下所有子目录名
/// &lt;/summary&gt;
/// &lt;param name=&quot;path&quot;&gt;文件夹路径&lt;/param&gt;
/// &lt;param name=&quot;word&quot;&gt;文件名过滤&lt;/param&gt;
public  List&lt;FileInfo&gt; getDirectoryFilter( string path, string word, List&lt;FileInfo&gt; lst)
{
	if (!Directory.Exists(path))
	{
		return lst;
	}
	getFileFilter( path, word, lst);
	DirectoryInfo root = new DirectoryInfo(path);
	foreach (DirectoryInfo d in root.GetDirectories())
	{
		getDirectoryFilter(d.FullName, word, lst);
	}
	return lst;
}

List&lt;FileInfo&gt; lstFiles = getDirectoryFilter(Log_Path, &quot;kernel_log&quot;, lst); //过滤函数
foreach (FileInfo shpFile in lst)
{
   ...//执行操作
}

过滤路径下指定格式的文件
private void GetTypefile(string path, string filetype, List&lt;FileInfo&gt; lst)
{
    DirectoryInfo theFolder = new DirectoryInfo(path);  // 给出你的目录文件位置 
    FileInfo[] fileInfo = theFolder.GetFiles(); // 获得当前的文件夹内的所有文件数组

    foreach (FileInfo NextFile in fileInfo)   //遍历文件
    { 
        if (NextFile.Extension == &quot;.&quot; + filetype)  // 得到你想要的格式
        {
            lst.Add(NextFile); 
        }
    }
}
</pre></div>
</div>
</section>
<section id="c">
<h3>5.C# 文件操作<a class="headerlink" href="#c" title="Permalink to this headline"></a></h3>
<section id="id7">
<h4>1.清除文件<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h4>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>        public void Clear_Files(string path)
        {
            if (Directory.Exists(path))
            {
                //获取该路径下的文件路径
                string[] filePathList = Directory.GetFiles(path);
                foreach (string filePath in filePathList)
                {
                    File.Delete(filePath);
                }
            }
        }
 
        public void Clear_Directors(string path)
        {
            if (Directory.Exists(path))
            {
                //获取该路径下的文件夹路径
                string[] directorsList = Directory.GetDirectories(path);
                foreach(string directory in directorsList)
                {
                    Directory.Delete(directory,true);//删除该文件夹及该文件夹下包含的文件
                }
            }
        }
 
————————————————
版权声明：本文为CSDN博主「Daniel799」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/u012664198/article/details/90412661
</pre></div>
</div>
</section>
<section id="id8">
<h4>6.修改文件名，并增加时间戳后缀<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h4>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>修改文件：
string srcFileName = @&quot;c:\order.txt&quot;;
string destFileName = @&quot;c:\abcd.txt&quot;;
if (File.Exists(srcFileName))
{
	File.Move(srcFileName, destFileName);
}

修改文件夹：
if (Directory.Exists(Log_Path + &quot;\\debuglogger&quot;))
{
	Directory.Move(Log_Path + &quot;\\debuglogger&quot;, Log_Path + &quot;\\debuglogger&quot; + DateTime.Now.ToString(&quot;yyyyMMddHHmm&quot;));//将后缀加入时间戳
}
</pre></div>
</div>
</section>
</section>
<section id="python-adb">
<h3>6.执行python/adb脚本<a class="headerlink" href="#python-adb" title="Permalink to this headline"></a></h3>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>python:
          ProcessStartInfo ProcessInfo;
            Process Process;
            int ExitCode;

            ProcessInfo = new ProcessStartInfo();
            ProcessInfo.FileName = &quot;python2.exe&quot;;
       
            ProcessInfo.CreateNoWindow = true;
            ProcessInfo.UseShellExecute = false;
            ProcessInfo.RedirectStandardOutput = true;
			ProcessInfo.Arguments = Environment.CurrentDirectory + &quot;\\tools\\kernel_to_utc.py &quot; + NextFile.FullName;
			TextBox1.Text = Environment.CurrentDirectory + &quot;\\tools\\kernel_to_utc.py &quot; + NextFile.FullName;
			Process = Process.Start(ProcessInfo);
			Process.WaitForExit();
			ExitCode = Process.ExitCode;
			Process.Close();

adb:
            Process p = new Process();
            p.StartInfo.FileName = &quot;cmd.exe&quot;;
            p.StartInfo.UseShellExecute = false;//是否使用操作系统shell启动
            p.StartInfo.RedirectStandardInput = true;//接受来自调用程序的输入信息
            p.StartInfo.RedirectStandardOutput = true;//由调用程序获取输出信息
            p.StartInfo.RedirectStandardError = true;//重定向标准错误输出
           // p.StartInfo.CreateNoWindow = false;//不显示程序窗口
            p.StartInfo.CreateNoWindow = true;          //设置不显示窗口  
            p.Start();//启动程序
            p.StandardInput.WriteLine(&quot;adb root&quot;);//目录装到C盘
            p.StandardInput.WriteLine(&quot;exit&quot;);//结束标志
            output = p.StandardOutput.ReadToEnd();//获取cmd窗口的输出信息，即便并无获取的需要也需要写这句话，不然程序会假死
            TextBox1.Text = output;
            p.WaitForExit();//等待程序执行完
            p.Close();//退出进程

输入多条命令：
https://blog.csdn.net/niuba123456/article/details/90509850?spm=1035.2023.3001.6557&amp;utm_medium=distribute.pc_relevant_bbs_down_v2.none-task-blog-2~default~OPENSEARCH~Rate-2.pc_relevant_bbs_down_v2_default&amp;depth_1-utm_source=distribute.pc_relevant_bbs_down_v2.none-task-blog-2~default~OPENSEARCH~Rate-2.pc_relevant_bbs_down_v2_default

cmd执行命令函数：

    public void RunCMDCommand(out string outPut, params string[] command)
        {
            using (Process pc = new Process())
            {
                pc.StartInfo.FileName = &quot;cmd.exe&quot;;
                pc.StartInfo.CreateNoWindow = true;//隐藏窗口运行
                pc.StartInfo.RedirectStandardError = true;//重定向错误流
                pc.StartInfo.RedirectStandardInput = true;//重定向输入流
                pc.StartInfo.RedirectStandardOutput = true;//重定向输出流
                pc.StartInfo.UseShellExecute = false;
                pc.Start();
                int lenght = command.Length;
                foreach (string com in command)
                {
                    pc.StandardInput.WriteLine(com);//输入CMD命令
                }
               pc.StandardInput.WriteLine(&quot;exit&quot;);//结束执行，很重要的
               pc.StandardInput.AutoFlush = true;
 
                outPut = pc.StandardOutput.ReadToEnd();//读取结果        
 
                pc.WaitForExit();
                pc.Close();
            }
        }
1. 设置可变参数：必须在实参的最后一个；

2.循环执行dos命令

3. 必须 exit进行退出，不然会一直停留在dos，没法返回信息；

C#调用

            string resultStr = &quot;&quot;;     
            daMoTools.RunCMDCommand(out resultStr,&quot;mkdir D:\\123&quot;, &quot;ipconfig&quot;);
 
            Console.WriteLine(resultStr);、

在C#中执行dos命令并返回结果字符串：
原文链接：https://blog.csdn.net/sundacheng1989/article/details/16114339

public string Execute(string dosCommand, int milliseconds)
        {
            string output = &quot;&quot;;     //输出字符串
            if (dosCommand != null &amp;&amp; dosCommand != &quot;&quot;)
            {
                Process process = new Process();     //创建进程对象
                ProcessStartInfo startInfo = new ProcessStartInfo();
                startInfo.FileName = &quot;cmd.exe&quot;;      //设定需要执行的命令
                startInfo.Arguments = &quot;/C &quot; + dosCommand;   //设定参数，其中的“/C”表示执行完命令后马上退出
                startInfo.UseShellExecute = false;     //不使用系统外壳程序启动
                startInfo.RedirectStandardInput = false;   //不重定向输入
                startInfo.RedirectStandardOutput = true;   //重定向输出
                startInfo.CreateNoWindow = true;     //不创建窗口
                process.StartInfo = startInfo;
                try
                {
                    if (process.Start())       //开始进程
                    {
                        if (milliseconds == 0)
                            process.WaitForExit();     //这里无限等待进程结束
                        else
                            process.WaitForExit(milliseconds);  //当超过这个毫秒后，不管执行结果如何，都不再执行这个DOS命令
                        output = process.StandardOutput.ReadToEnd();//读取进程的输出
                    }
                }
                catch
                {
                }
                finally
                {
                    if (process != null)
                        process.Close();
                }
            }
            return output;
        }
 
string result = Execute(&quot;subst&quot;, 1000);
</pre></div>
</div>
<ul class="simple">
<li><p>cmd实时回显：</p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CmdUtils</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">sendCmd</span><span class="p">(</span><span class="n">MainWindow</span><span class="w"> </span><span class="n">cmdoom</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Process</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">cmd</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Process</span><span class="p">();</span><span class="c1">//创建进程对象  </span>
<span class="w">                </span><span class="n">ProcessStartInfo</span><span class="w"> </span><span class="n">startInfo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProcessStartInfo</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">FileName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;cmd.exe&quot;</span><span class="p">;</span><span class="c1">//设定需要执行的命令  </span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">Arguments</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="c1">//“/C”表示执行完命令后马上退出  </span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">UseShellExecute</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="c1">//不使用系统外壳程序启动  </span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">RedirectStandardInput</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="c1">//不重定向输入  </span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">RedirectStandardOutput</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w"> </span><span class="c1">//重定向输出  </span>
<span class="w">                </span><span class="n">startInfo</span><span class="p">.</span><span class="n">CreateNoWindow</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="c1">//不创建窗口  </span>
<span class="w">                </span><span class="n">cmd</span><span class="p">.</span><span class="n">StartInfo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">startInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="c1">// cmd.Start();</span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="p">.</span><span class="n">Start</span><span class="p">())</span><span class="c1">//开始进程  </span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cmdoom</span><span class="p">.</span><span class="n">isRun</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="s">&quot;start&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shell</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardInput</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">shell</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span><span class="w"></span>

<span class="w">                        </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardInput</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="n">String</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span><span class="w"></span>
<span class="w">                        </span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">).</span><span class="n">ToUpper</span><span class="p">();</span><span class="w"></span>
<span class="w">                        </span><span class="n">updateLog</span><span class="p">(</span><span class="n">cmdoom</span><span class="p">,</span><span class="w"> </span><span class="n">log</span><span class="p">);</span><span class="w"></span>
<span class="w">                        </span><span class="n">log</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                        </span><span class="k">do</span><span class="w"></span>
<span class="w">                        </span><span class="p">{</span><span class="w"></span>

<span class="w">                            </span><span class="n">String</span><span class="w"> </span><span class="n">logm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cmd</span><span class="p">.</span><span class="n">StandardOutput</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span><span class="w"></span>
<span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">logm</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">                            </span><span class="p">{</span><span class="w"></span>

<span class="w">                                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="w">                            </span><span class="n">updateLog</span><span class="p">(</span><span class="n">cmdoom</span><span class="p">,</span><span class="w"> </span><span class="n">logm</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">                            </span><span class="n">log</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">logm</span><span class="p">;</span><span class="w"></span>

<span class="w">                        </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">true</span><span class="p">);</span><span class="w"></span>

<span class="w">                        </span><span class="n">shell</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>

<span class="w">                </span><span class="n">cmd</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>

<span class="w">                </span><span class="n">cmd</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">delegate</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">UpdateLog</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">updateLog</span><span class="p">(</span><span class="n">MainWindow</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">log</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">UpdateLog</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">delegate</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">cmd</span><span class="p">.</span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">log</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">};</span><span class="w"></span>
<span class="w">            </span><span class="n">cmd</span><span class="p">.</span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Dispatcher</span><span class="p">.</span><span class="n">BeginInvoke</span><span class="p">(</span><span class="k">set</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>


<span class="w">    </span><span class="c1">/// &lt;summary&gt;</span>
<span class="w">    </span><span class="c1">/// MainWindow.xaml 的交互逻辑</span>
<span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">partial</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">MainWindow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Window</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">isRun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;start&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">CmdUtils</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CmdUtils</span><span class="p">();</span><span class="w"> </span>
<span class="w">    </span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">MainWindow</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">InitializeComponent</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="nf">Thread</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ThreadStart</span><span class="p">(</span><span class="n">init</span><span class="p">)).</span><span class="n">Start</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">cmd</span><span class="p">.</span><span class="n">sendCmd</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Button_Click_Scp_Log</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">RoutedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">try</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">cmd</span><span class="p">.</span><span class="n">shell</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;adb shell&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;while true; do cat /dev/scp;done&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">catch</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">&quot;请连接手机adb&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="id9">
<h3>7.控件使用技巧<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h3>
<section id="id10">
<h4>1.换行显示<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h4>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span>第一种累加方式：
TextBox1.Text =  TextBox1.Text + &quot;\r\n&quot;+ GpioArrayStr[i];

第二种累加方式：
 TextBox1.Text = &quot;正在从手机中截屏...&quot;;
  TextBox1.Text += &quot;\r\n&quot; + &quot;截屏成功！保存路径：&quot; ;

第三种AppendText：
TextBox1.AppendText( &quot;\r\n&quot; + shpFile.FullName);

TextBox自动滚动:
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    TextBox1.SelectionStart = TextBox1.Text.Length; //Set the current caret position at the end
    TextBox1.Focus(); //让TextBox一直获取焦点
}

C#winform三种方法判断文本框textBox内容是否为空
使用系统API函数，需要使用命名空间：System.Runtime.InteropServices；

1.if (textBoxPath.Text ==  String.Empty )

2.if (textBoxPath.Text == &quot;&quot; )

3.if (String.IsNullOrEmpty(textBoxPath.Text))
————————————————
版权声明：本文为CSDN博主「摸鱼农」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/m0_59565974/article/details/118892747
</pre></div>
</div>
</section>
<section id="textboxtxt">
<h4>2.保存TextBox文本为txt<a class="headerlink" href="#textboxtxt" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.freesion.com/article/8742596152/">参考</a></p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 写文件</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name=&quot;Path&quot;&gt;文件路径&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;Strings&quot;&gt;文件内容&lt;/param&gt;</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">WriteFile</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Path</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Strings</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(!</span><span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">File</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="n">Path</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//Directory.CreateDirectory(Path);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">FileStream</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">File</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="n">Path</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">f</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">f</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">StreamWriter</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">StreamWriter</span><span class="p">(</span><span class="n">Path</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">f2</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Strings</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">f2</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">f2</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Button_Click</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">RoutedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Log_Path</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\\&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;log&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;yyyyMMddHHmm&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;.txt&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">WriteFile</span><span class="p">(</span><span class="n">log</span><span class="p">,</span><span class="w"> </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;log保存成功！路径如下：&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">AppendText</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">log</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="id11">
<h4>3.如何弹出确认提示框<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h4>
<p>参考：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://qa.1r1g.com/sf/ask/1282105051/">C#wpf中的确认框</a></p></li>
</ul>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="n">MessageBoxResult</span><span class="w"> </span><span class="n">messageBoxResult</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">Windows</span><span class="p">.</span><span class="n">MessageBox</span><span class="p">.</span><span class="n">Show</span><span class="p">(</span><span class="s">&quot;Are you sure?&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Delete Confirmation&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">Windows</span><span class="p">.</span><span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">YesNo</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">messageBoxResult</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">Yes</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Clear_Directory</span><span class="p">(</span><span class="n">Log_Path</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">TextBox1</span><span class="p">.</span><span class="n">Text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;MTK log文件删除成功！&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\r\n&quot;</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">Environment</span><span class="p">.</span><span class="n">CurrentDirectory</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="s">&quot;\\log\\debuglogger&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, wugn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "JjOE14XScyd75b2C",ck: "JjOE14XScyd75b2C"})</script>

<br/>
<script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/JjOE14XScyd75b2C/quote.js?theme=0&f=12&display=1,0,0,0,0,0,1,1"></script>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>